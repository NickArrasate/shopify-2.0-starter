<div class="page-width container cross-section">
  <div class="section-block section-block--padding">
    <div class="flex flex--grid flex--no-gutter">
      {% case section.blocks.size %}
        {% when 1 %}
          {% assign flex_size = '' %}
        {% when 2 %}
          {% assign flex_size = 'medium-up--one-half' %}
        {% when 3 %}
          {% assign flex_size = 'medium-up--one-third' %}
        {% else %}
          {% assign flex_size = 'medium-up--one-half' %}
      {% endcase %}
      {% for block in section.blocks %}
        <div class="flex__item flex flex--center-vertical {{ flex_size }}" {{ block.shopify_attributes }}>
          {% case block.type %}
            {% when 'image_block' %}
              <div class="flex__item text-center">
                {% if block.settings.image != blank %}
                  <noscript>
                    <img src="{{ block.settings.image | img_url: '1800x' }}" alt="{{ block.settings.image.alt }}" class="image-content__image">
                  </noscript>
                  <div class="image-content__image-container">
                    <div class="image-content__image-wrapper" style="text-align: center;">
                      {% assign img_url = block.settings.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' %}
                      <img class="image-content__image lazyload"
                        src="{{ block.settings.image | img_url: '1800x' }}"
                        data-src="{{ img_url }}"
                        data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]"
                        data-aspectratio="{{ block.settings.image.aspect_ratio }}"
                        data-sizes="auto"
                        alt="{{ block.settings.image.alt | escape }}">
                    </div>
                  </div>
                  {% if block.settings.cta_link %}
                  <a href="{{block.settings.cta_link}}" class="button button-primary">{{block.settings.cta_text}}</a>
                  {% endif %}
                {% else %}
                  <div class="image-content__image">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {% endif %}
              </div>
            {% when 'text_block' %}
              <div class="flex__item image-content__text text-{{ block.settings.align }}">
                <div class="emphasized-title-container left">
                  <h2 class="emphasized-title emphasized-title--large h2">{{ block.settings.title | escape }}</h2>
                  <div class="section-text">{{ block.settings.text }}</div>
                </div>
              </div>
          {% endcase %}
        </div>
      {% endfor %}
    </div>

    {% if section.blocks.size == 0 %}
      {% render 'no-blocks' %}
    {% endif %}
  </div>
</div>

{% schema %}
  {
    "name": {
      "en": "Ski cross section"
    },
    "class": "index-section",
    "max_blocks": 2,
    "blocks": [
      {
        "type": "text_block",
        "name": {
          "en": "Body Text",
          "es": "Texto"
        },
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": {
              "en": "Heading",
              "es": "Título"
            },
            "default": {
              "en": "Inside Your Skis",
              "es": "Imagen con texto"
            }
          },
          {
            "type": "richtext",
            "id": "text",
            "label": {
              "en": "Text",
              "es": "Texto"
            },
            "default": {
              "en": "<p>A detailed look at the highest quality materials that make up your skis.</p>",
              "es": "<p>Vincula un texto largo con una imagen para dar visibilidad a tu producto, colección o publicación de blog elegida. Agrega detalles sobre disponibilidad, estilo, o incluso ofrece una reseña.</p>"
            }
          },
          {
            "type": "select",
            "id": "align",
            "label": {
              "en": "Text alignment",
              "es": "Alineación de texto"
            },
            "options": [
              {
                "value": "left",
                "label": {
                  "en": "Left",
                  "es": "Izquierda"
                }
              },
              {
                "value": "center",
                "label": {
                  "en": "Center",
                  "es": "Centrar"
                }
              },
              {
                "value": "right",
                "label": {
                  "en": "Right",
                  "es": "Derecha"
                }
              }
            ],
            "default": "left"
          }
        ]
      },
      {
        "type": "image_block",
        "name": {
          "en": "Image",
          "es": "Imagen"
        },
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": {
              "en": "Image",
              "es": "Imagen"
            }
          },
          {
            "type": "url",
            "id": "cta_link",
            "label": "CTA Link"
          },
          {
            "type": "text",
            "id": "cta_text",
            "label": "CTA Text",
            "default": "Watch these skis getting made"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": {
          "en": "cross section image",
          "es": "Imagen con texto"
        },
        "category": {
          "en": "Image",
          "es": "Imagen"
        },
        "blocks": [
          {
            "type": "image_block"
          },
          {
            "type": "text_block"
          }
        ]
      }
    ]
  }
{% endschema %}
